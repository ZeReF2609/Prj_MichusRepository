@model IEnumerable<Michus.Models.pa_lista_descuento>

@{
    ViewData["Title"] = "Lista de Descuentos";
}

<link rel="stylesheet" href="~/assets/css/DescuentoStyle.css">

<h1 class="ml-3">Lista de Descuentos</h1>

<p class="ml-3">
    <a asp-action="Create" class="btn btn-primary">
        <i class="fas fa-plus"></i> Crear Nuevo
    </a>
</p>

<div class="ag-format-container">
    <div class="ag-courses_box">
        @foreach (var item in Model)
        {
            <div class="ag-courses_item">
                <a href="#" class="ag-courses-item_link">
                    <div class="ag-courses-item_bg"></div>

                    <div class="ag-courses-item_title">
                        <!-- Nombre o título del descuento -->
                        Descuento: @(string.IsNullOrEmpty(item.IdDescuento) ? "NO APLICA" : item.IdDescuento)
                    </div>

                    <div class="ag-courses-item_date-box">
                        <span class="ag-courses-item_date">
                            <strong>Promoción:</strong> @(item.IdPromocion == null ? "NO APLICA" : item.IdPromocion.ToString()) <br />
                            <strong>Evento:</strong> @(string.IsNullOrEmpty(item.IdEvento) ? "NO APLICA" : item.IdEvento) <br />
                            <strong>Inicio:</strong> @(item.FechaInicio == DateTime.MinValue ? "NO APLICA" : item.FechaInicio.ToString("dd/MM/yyyy")) <br />
                            <strong>Fin:</strong> @(item.FechaFin == DateTime.MinValue ? "NO APLICA" : item.FechaFin.ToString("dd/MM/yyyy")) <br />
                            <strong>Precio:</strong> @(item.PrecioDescuento == 0 ? "NO APLICA" : item.PrecioDescuento.ToString("C")) <br />
                            <strong>Tipo:</strong> @(item.TipoDescuento == 0 ? "NO APLICA" : item.TipoDescuento.ToString()) <br />
                            <strong>Categoría:</strong> @(string.IsNullOrEmpty(item.IdCategoria) ? "NO APLICA" : item.IdCategoria) <br />
                            <strong>Artículos:</strong> @(item.IdArticulos == null || !item.IdArticulos.Any() ? "NO APLICA" : string.Join(", ", item.IdArticulos)) <br />
                            <strong>Estado:</strong> @(item.Estado == 0 ? "NO APLICA" : item.Estado.ToString()) <br />
                            <strong>Situación:</strong> @(string.IsNullOrEmpty(item.TiSitu) ? "NO APLICA" : item.TiSitu)
                        </span>
                    </div>
                </a>
            </div>
        }
    </div>
</div>

<script>
    $(document).ready(function () {
        $('#descuentosTable').DataTable({
            language: {
                lengthMenu: "<span style='color: white; margin-left:10px'>Mostrar</span> _MENU_",
                search: "",
                searchPlaceholder: "Buscar..."
            }
        });
    });
</script>

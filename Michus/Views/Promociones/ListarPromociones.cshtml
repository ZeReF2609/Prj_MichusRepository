@{
    ViewBag.Title = "Listado de Promociones";
    var selectedPromocionId = ViewBag.PromocionesList ?? 1;
}

<!-- Formulario para seleccionar una promoción -->
<div class="container mt-4">
    <h2 class="text-white">Seleccionar Promoción</h2>
    <form method="get" action="@Url.Action("ListarPromociones")">
        <div class="form-group">
            <label for="idPromocion" class="text-white">Seleccionar Promoción:</label>
            @Html.DropDownList("idPromocion", (SelectList)ViewBag.PromocionesList, "Seleccione una Promoción", new { @class = "form-control" })
        </div>
        <button type="submit" class="btn btn-primary">Ver Detalles</button>
    </form>
</div>

<hr class="text-white">

<!-- Mostrar detalles de la promoción seleccionada -->
<div class="container mt-4">
    <h3 class="text-white">Detalles de la Promoción Seleccionada</h3>
    @if (ViewBag.DetallePromocion != null && ViewBag.DetallePromocion.Count > 0)
    {
        <div class="table-responsive">
            <table id="detallePromocionTable" class="table table-dark table-bordered table-hover">
                <thead class="thead-dark">
                    <tr>
                        <th>ID Detalle Promoción</th>
                        <th>ID Producto</th>
                        <th>Cantidad Aplicable</th>
                        <th>Tipo Aplicación</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var detalle in ViewBag.DetallePromocion)
                    {
                        <tr>
                            <td>@detalle.IdDetaPromocion</td>
                            <td>@detalle.IdProducto</td>
                            <td>@detalle.CantAplicable</td>
                            <td>@detalle.TipoAplicacion</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <p class="text-white">No se encontraron detalles para la promoción seleccionada.</p>
    }
</div>

<hr class="text-white">

<!-- Información general de las promociones -->
<div class="container mt-4">
    <h3 class="text-white">Promociones Disponibles</h3>
    @if (ViewBag.Promociones != null && ViewBag.Promociones.Count > 0)
    {
        <div class="table-responsive">
            <table id="promocionesTable" class="table table-dark table-bordered table-hover">
                <thead class="thead-dark">
                    <tr>
                        <th>Nombre de la Promoción</th>
                        <th>Tipo de Promoción</th>
                        <th>Descuento</th>
                        <th>Fecha Inicio</th>
                        <th>Fecha Fin</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var promo in ViewBag.Promociones)
                    {
                        <tr>
                            <td>@promo.NomPromo</td>
                            <td>@promo.TipoPromocion</td>
                            <td>@promo.Descuento</td>
                            <td>@promo.FechaInicio</td>
                            <td>@promo.FechaFin</td>
                            <td>@promo.Estado</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <p class="text-white">No se encontraron promociones.</p>
    }
</div>

<hr class="text-white">

<!-- Estilos personalizados -->
<style>
    body {
        background-color: #2e3b4e; /* Fondo oscuro similar al tema de la página */
        color: #fff;
    }

    .container {
        background-color: #343a40; /* Fondo oscuro para la sección de contenido */
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .btn-primary {
        background-color: #007bff;
        border: none;
    }

        .btn-primary:hover {
            background-color: #0056b3;
        }

    .table {
        margin-top: 20px;
        background-color: #212529; /* Fondo oscuro para la tabla */
        color: #fff;
        border: 1px solid #dee2e6;
    }

        .table th, .table td {
            padding: 15px;
            vertical-align: middle;
            text-align: left;
            background-color: #212529; /* Color de fondo de las celdas */
        }

    .table-hover tbody tr:hover {
        background-color: #484848; /* Resalta las filas al pasar el mouse */
    }

    .thead-dark th {
        background-color: #1d2124; /* Color de fondo de las cabeceras */
        color: #fff;
    }

    .table-bordered {
        border: 1px solid #dee2e6;
    }

    .table-responsive {
        overflow-x: auto;
    }

    hr {
        border-top: 1px solid #dee2e6;
    }

    h2, h3 {
        color: #fff;
    }
</style>

<!-- Scripts de Datatables -->
<script>
    $(document).ready(function () {
        $('#promocionesTable').DataTable({
            "paging": true,
            "searching": true,
            "ordering": true,
            "info": true,
            "lengthMenu": [10, 25, 50, 100],
            "language": {
                "url": "https://cdn.datatables.net/plug-ins/1.13.6/i18n/Spanish.json"
            }
        });

        $('#detallePromocionTable').DataTable({
            "paging": true,
            "searching": true,
            "ordering": true,
            "info": true,
            "lengthMenu": [10, 25, 50, 100],
            "language": {
                "url": "https://cdn.datatables.net/plug-ins/1.13.6/i18n/Spanish.json"
            }
        });
    });
</script>
